<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Mike's Portfolio</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
    />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <link rel="stylesheet" href="styles2.css" />
    <link rel="stylesheet" href="slider.css" />
  </head>
  <body>
    <script src="script.js"></script>

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.4.1/css/swiper.min.css"
    />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.0.13/css/all.css"
      integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp"
      crossorigin="anonymous"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Oswald:500"
      rel="stylesheet"
    />

    <header class="header">
      <nav class="navbar navbar-expand-lg fixed-top py-3">
        <div class="container">
          <a href="#" class="navbar-brand text-uppercase font-weight-bold"
            >Michael Bateman</a
          >
          <button
            type="button"
            data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent"
            aria-expanded="false"
            aria-label="Toggle navigation"
            class="navbar-toggler navbar-toggler-right"
          >
            <i class="fa fa-bars"></i>
          </button>

          <div id="navbarSupportedContent" class="collapse navbar-collapse">
            <ul class="navbar-nav ml-auto">
              <li class="nav-item active">
                <a href="#" class="nav-link text-uppercase font-weight-bold"
                  >Home <span class="sr-only">(current)</span></a
                >
              </li>
              <li class="nav-item">
                <a href="about.html" class="nav-link text-uppercase font-weight-bold"
                  >About</a
                >
              </li>
              <li class="nav-item">
                <a href="gallery.html" class="nav-link text-uppercase font-weight-bold"
                  >Gallery</a
                >
              </li>
              <li class="nav-item">
                <a href="#" class="nav-link text-uppercase font-weight-bold"
                  >Portfolio</a
                >
              </li>
              <li class="nav-item">
                <a href="#" class="nav-link text-uppercase font-weight-bold"
                  >Contact</a
                >
              </li>
            </ul>
          </div>
        </div>
      </nav>
    </header>


    <!-- ---------------------------------------------------- -->
    <script>
      !(function (e) {
        "undefined" == typeof module
          ? (this.charming = e)
          : (module.exports = e)
      })(function (e, n) {
        "use strict"
        n = n || {}
        var t = n.tagName || "span",
          o = null != n.classPrefix ? n.classPrefix : "char",
          r = 1,
          a = function (e) {
            for (
              var n = e.parentNode, a = e.nodeValue, c = a.length, l = -1;
              ++l < c;

            ) {
              var d = document.createElement(t)
              o && ((d.className = o + r), r++),
                d.appendChild(document.createTextNode(a[l])),
                n.insertBefore(d, e)
            }
            n.removeChild(e)
          }
        return (
          (function c(e) {
            for (
              var n = [].slice.call(e.childNodes), t = n.length, o = -1;
              ++o < t;

            )
              c(n[o])
            e.nodeType === Node.TEXT_NODE && a(e)
          })(e),
          e
        )
      })
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.4.1/js/swiper.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/2.0.2/TweenMax.min.js"></script>
    <section>
      <div class="swiper-container slideshow">
        <div class="swiper-wrapper">
          <div class="swiper-slide slide">
            <div
              class="slide-image"
              style="
                background-image: url(https://images.unsplash.com/photo-1538083024336-555cf8943ddc?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=66b476a51b19889e13182c0e4827af18&auto=format&fit=crop&w=1950&q=80);
              "
            ></div>
            <span class="slide-title">Frontend</span>
          </div>

          <div class="swiper-slide slide">
            <div
              class="slide-image"
              style="
                background-image: url(https://images.unsplash.com/photo-1500375592092-40eb2168fd21?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=e07d2457879a4e15577ec75a31023e47&auto=format&fit=crop&w=2134&q=80;;;;
              "
            ></div>
            <span class="slide-title">Backend</span>
          </div>

          <div class="swiper-slide slide">
            <div
              class="slide-image"
              style="
                background-image: url(https://images.unsplash.com/photo-1482059470115-0aadd6bf6834?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=267bba9a4e280ec64388fe8fb01e9d1b&auto=format&fit=crop&w=1950&q=80;;;;
              "
            ></div>
            <span class="slide-title">Mobile Development</span>
          </div>

        </div>

        <div class="slideshow-pagination"></div>

        <div class="slideshow-navigation">
          <div class="slideshow-navigation-button prev">
            <span class="fas fa-chevron-left"></span>
          </div>
          <div class="slideshow-navigation-button next">
            <span class="fas fa-chevron-right"></span>
          </div>
        </div>
      </div>
    </section>
    <script>
      class Slideshow {
        constructor(el) {
          this.DOM = { el: el }

          this.config = {
            slideshow: {
              delay: 3000,
              pagination: {
                duration: 3,
              },
            },
          }

          this.init()
        }
        init() {
          var self = this

          this.DOM.slideTitle = this.DOM.el.querySelectorAll(".slide-title")
          this.DOM.slideTitle.forEach((slideTitle) => {
            charming(slideTitle)
          })

          this.slideshow = new Swiper(this.DOM.el, {
            loop: true,
            autoplay: {
              delay: this.config.slideshow.delay,
              disableOnInteraction: false,
            },
            speed: 500,
            preloadImages: true,
            updateOnImagesReady: true,

            pagination: {
              el: ".slideshow-pagination",
              clickable: true,
              bulletClass: "slideshow-pagination-item",
              bulletActiveClass: "active",
              clickableClass: "slideshow-pagination-clickable",
              modifierClass: "slideshow-pagination-",
              renderBullet: function (index, className) {
                var slideIndex = index,
                  number = index <= 8 ? "0" + (slideIndex + 1) : slideIndex + 1

                var paginationItem = '<span class="slideshow-pagination-item">'
                paginationItem +=
                  '<span class="pagination-number">' + number + "</span>"
                paginationItem =
                  index <= 8
                    ? paginationItem +
                      '<span class="pagination-separator"><span class="pagination-separator-loader"></span></span>'
                    : paginationItem
                paginationItem += "</span>"

                return paginationItem
              },
            },

            navigation: {
              nextEl: ".slideshow-navigation-button.next",
              prevEl: ".slideshow-navigation-button.prev",
            },

            scrollbar: {
              el: ".swiper-scrollbar",
            },

            on: {
              init: function () {
                self.animate("next")
              },
            },
          })

          this.initEvents()
        }
        initEvents() {
          this.slideshow.on("paginationUpdate", (swiper, paginationEl) =>
            this.animatePagination(swiper, paginationEl)
          )

          this.slideshow.on("slideNextTransitionStart", () =>
            this.animate("next")
          )

          this.slideshow.on("slidePrevTransitionStart", () =>
            this.animate("prev")
          )
        }
        animate(direction = "next") {
          ;(this.DOM.activeSlide = this.DOM.el.querySelector(
            ".swiper-slide-active"
          )),
            (this.DOM.activeSlideImg = this.DOM.activeSlide.querySelector(
              ".slide-image"
            )),
            (this.DOM.activeSlideTitle = this.DOM.activeSlide.querySelector(
              ".slide-title"
            )),
            (this.DOM.activeSlideTitleLetters = this.DOM.activeSlideTitle.querySelectorAll(
              "span"
            ))

          this.DOM.activeSlideTitleLetters =
            direction === "next"
              ? this.DOM.activeSlideTitleLetters
              : [].slice.call(this.DOM.activeSlideTitleLetters).reverse()

          this.DOM.oldSlide =
            direction === "next"
              ? this.DOM.el.querySelector(".swiper-slide-prev")
              : this.DOM.el.querySelector(".swiper-slide-next")
          if (this.DOM.oldSlide) {
            ;(this.DOM.oldSlideTitle = this.DOM.oldSlide.querySelector(
              ".slide-title"
            )),
              (this.DOM.oldSlideTitleLetters = this.DOM.oldSlideTitle.querySelectorAll(
                "span"
              ))
            this.DOM.oldSlideTitleLetters.forEach((letter, pos) => {
              TweenMax.to(letter, 0.3, {
                ease: Quart.easeIn,
                delay: (this.DOM.oldSlideTitleLetters.length - pos - 1) * 0.04,
                y: "50%",
                opacity: 0,
              })
            })
          }

          this.DOM.activeSlideTitleLetters.forEach((letter, pos) => {
            TweenMax.to(letter, 0.6, {
              ease: Back.easeOut,
              delay: pos * 0.05,
              startAt: { y: "50%", opacity: 0 },
              y: "0%",
              opacity: 1,
            })
          })

          TweenMax.to(this.DOM.activeSlideImg, 1.5, {
            ease: Expo.easeOut,
            startAt: { x: direction === "next" ? 200 : -200 },
            x: 0,
          })

        }
        animatePagination(swiper, paginationEl) {
          this.DOM.paginationItemsLoader = paginationEl.querySelectorAll(
            ".pagination-separator-loader"
          )
          this.DOM.activePaginationItem = paginationEl.querySelector(
            ".slideshow-pagination-item.active"
          )
          this.DOM.activePaginationItemLoader = this.DOM.activePaginationItem.querySelector(
            ".pagination-separator-loader"
          )

          console.log(swiper.pagination)

          TweenMax.set(this.DOM.paginationItemsLoader, { scaleX: 0 })
          TweenMax.to(
            this.DOM.activePaginationItemLoader,
            this.config.slideshow.pagination.duration,
            {
              startAt: { scaleX: 0 },
              scaleX: 1,
            }
          )
        }
      }

      const slideshow = new Slideshow(document.querySelector(".slideshow"))
    </script>
  </body>
</html>
